title Diagrama para la simulación monoobjetivo

actor User
participant MainWindowController
participant ProblemMenuConfiguration
participant InpParser
participant NetworkComponent
participant ElementViewer
participant ConfigurationDinamicWindowController
participant MonoObjectiveRunningWindowController
participant AlgorithmTask
participant ResultPlotWindowController
participant ResultWindowController
participant Algorithm
participant Problem

autonumber on
autoactivation on
[->MainWindowController:initialize()
MainWindowController->ProblemMenuConfiguration://agregar problemas al menu//\naddMonoObjectiveProblems()
deactivate MainWindowController
ProblemMenuConfiguration ->ProblemMenuConfiguration:Validar el uso de las anotaciones\nen las clases que heredan de\nRegistrable y en los Operadores
deactivateafter ProblemMenuConfiguration
space 
deactivate ProblemMenuConfiguration

User->MainWindowController://Disparar evento\npara abrir la red//\nopenOnAction()

autoactivation off
User<-MainWindowController: Ventana de elección\nde archivos
User-->MainWindowController: Ubicación del archivo
autoactivation on
MainWindowController->MainWindowController: loadNetwork()
MainWindowController->InpParser://Leer red and rellenar el objeto network//\nparse(Network)
MainWindowController<--InpParser:network
destroyafter InpParser
MainWindowController->NetworkComponent://Dibuja la red//\ndrawNetwork(Network)
deactivateafter NetworkComponent
MainWindowController->ElementViewer://Rellena el visor de elementos//\nsetNetwork(Network)
deactivateafter ElementViewer
deactivateafter MainWindowController
space
deactivate MainWindowController

User->ProblemMenuConfiguration://Elegir problema\ndesde un menu y \ndisparar evento\npara abrir la red//\nmenuItemEventHander()

ProblemMenuConfiguration->*ConfigurationDinamicWindowController:<<crear>>

deactivate ConfigurationDinamicWindowController

ProblemMenuConfiguration->ConfigurationDinamicWindowController://Solicita al controlador que\n muestra la ventana//\nshowDinamicWindow()
deactivate ProblemMenuConfiguration
User<--ConfigurationDinamicWindowController:Ventana de configuración\nde algoritmo


User->ConfigurationDinamicWindowController:Ingresa las configuraciones\ny disparar evento para crear\nla instancia de la clase registrable\nonRunButtonClick()

ConfigurationDinamicWindowController->ConfigurationDinamicWindowController:Crear instancia \nde Registrable
MainWindowController<-ConfigurationDinamicWindowController://Ejecuta el callback//\nrunAlgorithm(Registrable)
deactivate ConfigurationDinamicWindowController
deactivateafter ConfigurationDinamicWindowController
destroyafter ConfigurationDinamicWindowController

autoactivation off
MainWindowController->MainWindowController://Construye el algoritmo//\nRegistrable.build()
autoactivation on
MainWindowController->*MonoObjectiveRunningWindowController:<<crear>>
MonoObjectiveRunningWindowController->*AlgorithmTask: <<crear>
deactivate AlgorithmTask
MonoObjectiveRunningWindowController->*ResultPlotWindowController:<<crear>>
deactivate ResultPlotWindowController
deactivate MonoObjectiveRunningWindowController

MainWindowController->MonoObjectiveRunningWindowController://Muestra la ventana de \nejecución y ejecuta \nel algoritmo//\nshowWindowAndRunAlgorithm()
deactivate MainWindowController
autoactivation off
note over AlgorithmTask:Se ejecuta en otro\nhilo
User<--MonoObjectiveRunningWindowController: Muestra la ventana de feedback
autoactivation on
MonoObjectiveRunningWindowController->AlgorithmTask://Iniciar la ejecución un nuevo hilo//\nrun()
deactivate MonoObjectiveRunningWindowController

loop Hasta que se alcance la condición de termino (isStoppingConditionReached())
opt Opcional: Cancelar tarea o cerrar ventana
User->MonoObjectiveRunningWindowController://Solicita la cancelación de la tarea//\nonCancelButtonClick()\n          o\n//Solicita cerrar la ventada//\nonCloseButtonClick()
autoactivation off
MonoObjectiveRunningWindowController->AlgorithmTask://Cancela la tarea si\nesta en ejecucion//\ncancel()
deactivate MonoObjectiveRunningWindowController
destroy AlgorithmTask
end

autoactivation on
AlgorithmTask->Algorithm://Ejecutar un paso//\nrunSingleStep()
deactivateafter Algorithm
AlgorithmTask->Algorithm: Obtener estado de la ejecución
AlgorithmTask<--Algorithm:Devuelve el progreso del algoritmo\ny los resultados parciales
MonoObjectiveRunningWindowController<-AlgorithmTask:Notifica cambio del progreso de ejecución
MonoObjectiveRunningWindowController->ResultPlotWindowController: Agrega el resultado parcial al grafico
deactivateafter ResultPlotWindowController
User<--MonoObjectiveRunningWindowController: Muestra el cambio el progreso al usuario
opt Opcional: Mostrar grafico de resultados
User->MonoObjectiveRunningWindowController://Mostrar grafico//\nonShowChartButtonClick()
MonoObjectiveRunningWindowController->ResultPlotWindowController://Abre la ventada de graficos//\nshowAssociatedWindow();
deactivateafter ResultPlotWindowController
deactivate MonoObjectiveRunningWindowController
end 
end
MonoObjectiveRunningWindowController<--AlgorithmTask: Devuelve los resultados finales
activate MonoObjectiveRunningWindowController
MonoObjectiveRunningWindowController->*ResultWindowController: <<crear>>
deactivate ResultWindowController
MonoObjectiveRunningWindowController->ResultWindowController: Abre ventana con los resultados
deactivate MonoObjectiveRunningWindowController
User<--ResultWindowController: Muestra ventana con los resultados
alt Guardar table completa:
User->ResultPlotWindowController: //Solicita guardar la tabla de resultados completa//\nonSaveButtonClick()
ResultPlotWindowController->ResultPlotWindowController:Guarda en dispositivo.
deactivateafter ResultPlotWindowController
space 
deactivate ResultPlotWindowController
else Guardar como inp
User->ResultPlotWindowController://Solicita guardar los resultados seleccionados como un archivo inp//\nonSaveAsINPButtonClick()
ResultPlotWindowController->Problem: //Aplica las soluciones seleccionadas \na una copia del objeto network abierto//\napplySolutionToNetwork(Network.copy(), solución)
ResultPlotWindowController<--Problem: El objeto network con la solución aplicada
ResultPlotWindowController->ResultPlotWindowController:Guarda en dispositivo.
deactivateafter ResultPlotWindowController
space
deactivate ResultPlotWindowController
end

autoactivation off
autonumber off